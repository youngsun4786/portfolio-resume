---
import ProfileCard from './ProfileCard.astro'
import Section from '@/components/Section.astro'
import Card from '@/components/Card.astro'
import ProjectCard from './ProjectCard.astro'
import { Button } from './ui/button'
---

<!-- OVERLAY -->
<div
	id='overlay'
	class='pointer-events-auto fixed inset-0 z-40 hidden items-center justify-center bg-slate-100 bg-opacity-100 bg-[radial-gradient(100%_50%_at_50%_0%,rgba(0,163,255,0.13)_0,rgba(0,163,255,0)_50%,rgba(0,163,255,0)_100%)] dark:bg-neutral-950 dark:bg-[radial-gradient(ellipse_80%_80%_at_50%_-20%,rgba(120,119,198,0.3),rgba(255,255,255,0))]'
>
	<!-- MODAL -->
	<dialog
		id='dialog'
		class='z-50 mt-4 h-5/6 max-w-[60rem] overflow-y-scroll rounded-lg px-10 py-6 shadow-lg dark:bg-zinc-900/50 dark:text-zinc-50 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:bg-gray-300 dark:[&::-webkit-scrollbar-thumb]:rounded-full dark:[&::-webkit-scrollbar-thumb]:bg-neutral-500 [&::-webkit-scrollbar-track]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 dark:[&::-webkit-scrollbar-track]:rounded-full dark:[&::-webkit-scrollbar-track]:bg-neutral-700 [&::-webkit-scrollbar]:h-1 [&::-webkit-scrollbar]:w-2'
	>
		<div class='flex w-full flex-col gap-y-10'>
			<Section title='Experience'>
				<Card
					heading='McGill University'
					subheading='Research Intern'
					date='May 2024 - Aug 2024'
					imagePath='/src/assets/mcgill.jpeg'
					altText='McGill - Research Intern'
					imageClass='h-12 w-auto md:-left-16'
					link='https://www.cs.mcgill.ca/~jvybihal/index.php?Page=Research'
				/>
				<Card
					heading='UAEM'
					subheading='Web Developer'
					date='Oct 2023 - Present'
					imagePath='/src/assets/UAEM.jpeg'
					altText='UAEM - Web Developer'
					imageClass='h-12 w-12 md:-left-16'
					link='https://www.uaem.org/'
				/>
				<Card
					heading='Flojoy'
					subheading='Software Developer Intern'
					date='May 2023 - Dec 2023'
					imagePath='/src/assets/flojoy.png'
					altText='Flojoy - Software Developer Intern'
					imageClass='h-12 w-auto md:-left-16'
					link='https://www.flojoy.ai'
				/>
				<Card
					heading='SDPLEX (acquired)'
					subheading='Software Engineer Intern'
					date='May 2022 - Aug 2022'
					imagePath='/src/assets/SDPlex.png'
					altText='SDPLEX - Software Engineer Intern'
					imageClass='h-12 w-auto md:-left-16'
					link='http://www.sdplex.com/html/01_about.html'
				/>
			</Section>
			<Section title='Projects'>
				<div class='grid grid-cols-2 flex-col gap-y-5 sm:flex-row sm:gap-x-3'>
					<ProjectCard
						as='div'
						heading='ReWind'
						subheading='Coming soon...'
						imagePath='/src/assets/coming-soon.png'
						altText='project-rewind'
						class='w-full'
					/>
					<ProjectCard
						href='https://wander-plan.vercel.app/'
						heading='WanderPlan'
						subheading='React, Django, Langchain, Firebase'
						imagePath='/src/assets/wanderplan.png'
						altText='project-wanderplan'
						class='w-full'
					/>
					<ProjectCard
						href='https://mcevent.netlify.app/login'
						heading='McEvent'
						subheading='Angular, Express, NodeJS, MongoDB, TypeScript'
						imagePath='/src/assets/mcevent.png'
						altText='project-mcevent'
						class='w-full'
					/>
				</div>
			</Section>
			<div class='flex items-center justify-center'>
				<!-- CLOSE BUTTON -->
				<Button id='close-dialog' variant='outline'>close</Button>
			</div>
		</div>
	</dialog>
</div>

<ProfileCard id='open-dialog' />

<script is:inline>
	const overlay = document.getElementById('overlay')
	const dialog = document.getElementById('dialog')
	const dialogOpen = document.getElementById('open-dialog')
	const dialogClose = document.getElementById('close-dialog')

	dialogOpen.addEventListener('click', openDialog)

	dialogClose.addEventListener('click', closeDialog)

	function openDialog() {
		overlay.classList.remove('hidden')
		overlay.classList.add('flex')
		dialogOpen.classList.add('pointer-events-none')
		dialog.show()
		// dialog.addEventListener('click', closeDialogOnClickOutside)
	}

	function closeDialog() {
		overlay.classList.add('hidden')
		overlay.classList.remove('flex')
		dialogOpen.classList.remove('pointer-events-none')
		dialog.close()
		// dialog.removeEventListener('click', closeDialogOnClickOutside)
	}

	function closeDialogOnClickOutside(event) {
		event.target === closeDialog()
	}
</script>
